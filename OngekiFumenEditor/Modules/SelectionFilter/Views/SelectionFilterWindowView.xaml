<Window x:Class="OngekiFumenEditor.Modules.SelectionFilter.Views.SelectionFilterWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:cal="http://caliburnmicro.com"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:vm="clr-namespace:OngekiFumenEditor.Modules.SelectionFilter.ViewModels"
        xmlns:selectionFilter="clr-namespace:OngekiFumenEditor.Modules.SelectionFilter"
        xmlns:markup="clr-namespace:OngekiFumenEditor.UI.Markup"
        mc:Ignorable="d"
        ShowInTaskbar="False"
        ShowActivated="True"
        SizeToContent="WidthAndHeight"
        Padding="3"
        ResizeMode="NoResize"
        d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type=vm:SelectionFilterViewModel}">
    <Window.Resources>
        <Style TargetType="CheckBox">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
        </Style>
        <Style TargetType="RadioButton">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Margin" Value="4 0"></Setter>
        </Style>
    </Window.Resources>

    <Window.DataContext>
        <vm:SelectionFilterViewModel />
    </Window.DataContext>

    <StackPanel Orientation="Vertical" Height="Auto">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Label Grid.Column="0" Content="{markup:Translate [SelectionFilter_HeaderObjectType]}" />
            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Stretch">
                <Button Content="{markup:Translate [SelectionFilter_ActionLabelSelectAll]}"
                        cal:Message.Attach="FilterObjectTypesSelectAll()" />
                <Button Content="{markup:Translate [SelectionFilter_ActionLabelResetSelection]}"
                        cal:Message.Attach="FilterObjectTypesReset()" />
            </StackPanel>
        </Grid>

        <ItemsControl ItemsSource="{Binding FilterCategories}" x:Name="ObjectTypesCheckListBoxes">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <xctk:CheckListBox ItemsSource="{Binding Items}"
                                       HorizontalContentAlignment="Stretch"
                                       Height="Auto"
                                       IsSelectAllActive="True"
                                       DisplayMemberPath="Display"
                                       SelectedMemberPath="IsSelected"
                                       SelectAllContent="{Binding CategoryNameDisplay}"
                                       Loaded="FixFilterTypesAllSelect" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        <Label Content="{markup:Translate [SelectionFilter_HeaderOptions]}" />

        <TabControl>
            <TabItem Header="{markup:Translate [SelectionFilter_OptionTabGeneral]}">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" Margin="5 5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelTag]}" />
                        <xctk:WatermarkTextBox Width="100" Watermark="{markup:Translate [SelectionFilter_Any]}"
                                               Text="{Binding FilterOptions.TagFilter, Mode=TwoWay}" />
                        <CheckBox Content="{markup:Translate [SelectionFilter_OptionLabelTagRegex]}"
                                  IsChecked="{Binding FilterOptions.IsTagFilterRegex, Mode=TwoWay}" />
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <TabItem Header="{markup:Translate [SelectionFilter_OptionTabLanes]}">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelLaneNodeType]}" />
                        <RadioButton GroupName="LaneNodeTypeOptions"
                                     Content="{markup:Translate [SelectionFilter_AnyChoice]}"
                                     IsChecked="{Binding FilterOptions.NodeTypeFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Any}, Mode=TwoWay}" />
                        <RadioButton GroupName="LaneNodeTypeOptions"
                                     Content="{markup:Translate [SelectionFilter_OptionChoiceLaneStart]}"
                                     IsChecked="{Binding FilterOptions.NodeTypeFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Head}, Mode=TwoWay}" />
                        <RadioButton GroupName="LaneNodeTypeOptions"
                                     Content="{markup:Translate [SelectionFilter_OptionChoiceLaneNext]}"
                                     IsChecked="{Binding FilterOptions.NodeTypeFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Tail}, Mode=TwoWay}" />
                    </StackPanel>
                    <CheckBox Margin="5"
                              Content="{markup:Translate [SelectionFilter_OptionLabelMatchNextNodesWithSelectedHead]}"
                              IsChecked="{Binding FilterOptions.OnlyMatchLanesWithSelectedStartNodes, Mode=TwoWay}" />
                    <CheckBox Margin="5"
                              Content="{markup:Translate [SelectionFilter_OptionLabelMatchCurveControlsWithSelectedLane]}"
                              IsChecked="{Binding FilterOptions.OnlyMatchCurvesWithSelectedLaneNodes, Mode=TwoWay}" />
                </StackPanel>
            </TabItem>

            <TabItem Header="{markup:Translate [SelectionFilter_OptionTabHitObjects]}">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" Margin="5 5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelIsCritical]}" />
                        <RadioButton GroupName="IsCriticalOptions"
                                     Content="{markup:Translate [SelectionFilter_AnyChoice]}"
                                     IsChecked="{Binding FilterOptions.IsCriticalFilterMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:YesNoFilteringMode.Any}, Mode=TwoWay}" />
                        <RadioButton GroupName="IsCriticalOptions"
                                     Content="{markup:Translate [SelectionFilter_ChoiceYes]}"
                                     IsChecked="{Binding FilterOptions.IsCriticalFilterMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:YesNoFilteringMode.Yes}, Mode=TwoWay}" />
                        <RadioButton GroupName="IsCriticalOptions"
                                     Content="{markup:Translate [SelectionFilter_ChoiceNo]}"
                                     IsChecked="{Binding FilterOptions.IsCriticalFilterMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:YesNoFilteringMode.No}, Mode=TwoWay}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5 5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelFlickDirection]}" />
                        <RadioButton GroupName="FlickDirectionRadio"
                                     Content="{markup:Translate [SelectionFilter_AnyChoice]}"
                                     IsChecked="{Binding FilterOptions.FlickDirectionFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LeftRightFilteringMode.Any}, Mode=TwoWay}" />
                        <RadioButton GroupName="FlickDirectionRadio"
                                     Content="{markup:Translate [DirectionLeft]}"
                                     IsChecked="{Binding FilterOptions.FlickDirectionFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LeftRightFilteringMode.Left}, Mode=TwoWay}" />
                        <RadioButton GroupName="FlickDirectionRadio"
                                     Content="{markup:Translate [DirectionRight]}"
                                     IsChecked="{Binding FilterOptions.FlickDirectionFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LeftRightFilteringMode.Right}, Mode=TwoWay}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelHoldType]}" />
                        <RadioButton GroupName="HoldPartRadio"
                                     Content="{markup:Translate [SelectionFilter_AnyChoice]}"
                                     IsChecked="{Binding FilterOptions.HoldPartFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Any}, Mode=TwoWay}" />
                        <RadioButton GroupName="HoldPartRadio"
                                     Content="{markup:Translate [SelectionFilter_OptionChoiceHoldStart]}"
                                     IsChecked="{Binding FilterOptions.HoldPartFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Head}, Mode=TwoWay}" />
                        <RadioButton GroupName="HoldPartRadio"
                                     Content="{markup:Translate [SelectionFilter_OptionChoiceHoldEnd]}"
                                     IsChecked="{Binding FilterOptions.HoldPartFilteringMode, Converter={StaticResource ParamValueToBoolConverter}, ConverterParameter={x:Static selectionFilter:LinePointTypeFilteringMode.Tail}, Mode=TwoWay}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelDockLanes]}" />
                        <xctk:CheckComboBox x:Name="FilterDockableTypeCheckComboBox" Width="100"
                                            IsSelectAllActive="True"
                                            ItemsSource="{Binding FilterOptions.FilterDockableLaneOptions}"
                                            DisplayMemberPath="Name" SelectedMemberPath="IsSelected"
                                            Text="" />
                    </StackPanel>

                    <CheckBox Content="{markup:Translate [SelectionFilter_OptionLabelMatchHoldEndsWithSelectedStart]}"
                              Margin="5"
                              IsChecked="{Binding FilterOptions.OnlyMatchHoldsEndsWithSelectedStartNodes, Mode=TwoWay}" />

                </StackPanel>
            </TabItem>

            <TabItem Header="{markup:Translate [SelectionFilter_OptionTabBullets]}">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <Label Content="{markup:Translate [SelectionFilter_OptionLabelBulletPalette]}" />
                        <xctk:CheckComboBox ItemsSource="{Binding FilterOptions.FilterBulletPalettesItems}"
                                            SelectedMemberPath="IsSelected"
                                            IsSelectAllActive="True"
                                            Width="100" MaxWidth="100"
                                            Text="" Loaded="BulletPaletteCheckList_SetText"
                                            Closed="BulletPaletteCheckList_SetText">
                            <xctk:CheckComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Display}" />
                                </DataTemplate>
                            </xctk:CheckComboBox.ItemTemplate>
                        </xctk:CheckComboBox>
                    </StackPanel>

                </StackPanel>
            </TabItem>
        </TabControl>

        <Separator />

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="5">
            <CheckBox Content="{markup:Translate [SelectionFilter_OptionLabelInvertFilter]}"
                      IsChecked="{Binding FilterOptions.IsInvertFilterEnabled, Mode=TwoWay}"
                      ToolTip="{markup:Translate [SelectionFilter_OptionLabelInvertFilterTooltip]}"
                      ToolTipService.InitialShowDelay="100" />
        </StackPanel>

        <TextBlock Text="{Binding FilterOutcomeText}" Margin="5" />

        <StackPanel Orientation="Horizontal" Margin="5">
            <Button Content="{markup:Translate [ApplyFilter]}" Click="ApplyButton_Click" />
            <Button Content="{markup:Translate [Cancel]}" Click="CancelButton_Click" />
        </StackPanel>
    </StackPanel>
</Window>